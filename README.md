# HOK_QQBot 使用手册

[![GitHub](https://img.shields.io/badge/GitHub-Repository-blue?logo=github)](https://github.com/zhdxlz/HOK_QQBot_showcase)

## 目录

- [HOK\_QQBot 使用手册](#hok_qqbot-使用手册)
  - [目录](#目录)
  - [🎯 功能速查](#-功能速查)
  - [📖 总览](#-总览)
  - [🎮 核心功能](#-核心功能)
    - [一、战绩查询](#一战绩查询)
      - [1. 排行榜查询](#1-排行榜查询)
      - [2. 个人战绩查询](#2-个人战绩查询)
      - [3. 在线状态查询](#3-在线状态查询)
    - [二、英雄数据](#二英雄数据)
      - [1. 英雄战力查询](#1-英雄战力查询)
      - [2. 单英雄数据查询](#2-单英雄数据查询)
      - [3. 今日英雄](#3-今日英雄)
    - [三、数据分析](#三数据分析)
      - [1. 评分分析](#1-评分分析)
      - [2. 总览](#2-总览)
      - [3. 实力评估（戳一戳）](#3-实力评估戳一戳)
    - [四、智能对话](#四智能对话)
      - [1. 普通聊天](#1-普通聊天)
      - [2. 记忆管理](#2-记忆管理)
        - [永久记忆](#永久记忆)
        - [清除记忆](#清除记忆)
      - [3. 戳一戳互动](#3-戳一戳互动)
    - [五、其他](#五其他)
      - [1. 使用手册](#1-使用手册)
      - [2. 查看源码](#2-查看源码)
      - [3. 每日推送](#3-每日推送)
      - [4. 网页链接](#4-网页链接)
  - [📞 常见问题](#-常见问题)
  - [附录：指标计算方法](#附录指标计算方法)
    - [一、机制受益/受害指标](#一机制受益受害指标)
    - [二、拿手英雄指标](#二拿手英雄指标)
    - [三、战局实力评估（底蕴值）](#三战局实力评估底蕴值)
    - [四、团队贡献度指标](#四团队贡献度指标)

---

## 🎯 功能速查

<table>
<thead>
<tr>
<th>功能</th>
<th>备注</th>
<th>示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>排行榜</td>
<td>全员战绩</td>
<td><code>#排行/排名</code></td>
</tr>
<tr>
<td rowspan="4">战绩</td>
<td>今日</td>
<td><code>#我的战绩</code></td>
</tr>
<td>昨天/前天</td>
<td><code>#阳大师昨天/前天的战绩</code></td>
</tr>
<tr>
<td>X天前</td>
<td><code>#玉皇的战绩-X</code></td>
</tr>
<tr>
<td>X天前-Y天前</td>
<td><code>#🦶的战绩X-Y</code></td>
</tr>
<tr>
<td>在线查询</td>
<td>在线成员</td>
<td><code>#在线</code></td>
</tr>
<tr>
<td>战力查询</td>
<td>高战力英雄</td>
<td><code>#龙牙弟弟的战力</code></td>
</tr>
<tr>
<td>英雄查询</td>
<td>英雄场次/MVP等数据</td>
<td><code>#辉儿的露娜</code></td>
</tr>
<tr>
<td>今日英雄</td>
<td>个性化推荐英雄</td>
<td><code>#今日英雄</code></td>
</tr>
<tr>
<td>评分图表</td>
<td>近30天评分变化</td>
<td><code>#小卷王的分析</code></td>
</tr>
<tr>
<td rowspan="2">受益受害</td>
<td>近5日</td>
<td><code>#总览b</code></td>
</tr>
<tr>
<td>近X日</td>
<td><code>#总览b-X</code></td>
</tr>
<tr>
<td>实力评估</td>
<td>（查询战绩后）</td>
<td>戳一戳</td>
</tr>
<tr>
<td>智能对话</td>
<td>任意内容</td>
<td><code>#今天天气</code></td>
</tr>
<tr>
<td>永久记忆</td>
<td>对话记忆</td>
<td><code>#记住我喜欢射手</code></td>
</tr>
<tr>
<td>清除记忆</td>
<td>清除记忆</td>
<td><code>#empty_cache</code></td>
</tr>
</tbody>
</table>

---

## 📖 总览

本机器人是一个基于王者荣耀游戏数据的智能QQ群助手，能够查询战绩、分析数据、智能对话等。所有功能均通过发送以 **#** 开头的消息触发。

---

## 🎮 核心功能

### 一、战绩查询

#### 1. 排行榜查询
**触发方式**：`#` + "排行"/"排名"

**功能说明**：
- 显示成员当日战绩排行
- "上分榜"（按星数变化排序）
- "场次榜"（按游戏场次排序）
- 标注当日最佳表现者
- 近期数据分析（最高/最低评分、机制受益者）

**使用示例**：
```
#排行
#排名
```

**返回内容**：
```
阳大师 下午好
2025-11-19 17:35

近5天最高最低评分：
      ↑龙牙的粉丝头子的盾山：15.2分
      ↓阳大师的韩信：2.5分
机制受益受害者 ：
      凌灰樱：19.426
      阳大师：67.24

--- 上分榜 ---
今日上分最佳👆：LYG.KK
今日掉分最多👇：青训·奶龙@
    1.	LYG.KK	       +4
    2.	LYG.云上之缨	       +3
    3.	芋圆糯塔塔铠	       +3
    4.	LYG.蒿芸	       +3
    5.	染尘烟夕	       +1
    6.	龙牙之圣剑	       +1
    7.	LYG.未央	       +0
    8.	poulid	       +0
    9.	··舞··	       +0
    10.	青训·奶龙@	       -1

--- 场次榜 ---
今日场次最多👆：青训·奶龙@
    1.	青训·奶龙@	       19
    2.	芋圆糯塔塔铠	       9
    3.	LYG.蒿芸	       9
    4.	LYG.未央	       5
    5.	龙牙之圣剑	       5
    6.	LYG.云上之缨	       5
    7.	··舞··	       4
    8.	染尘烟夕	       3
    9.	LYG.KK	       3
    10.	poulid	       3

https://zhdxlz.top/btlist?key=d9e1a47b041ea55c

今日峡谷风云变幻，数据之弦拨动命运的交响。龙牙的盾山如巍峨壁垒斩获巅峰评分，而阳大师的韩信却深陷低谷；凌灰樱与阳大师在机制浪潮中浮沉，一个受益登顶，一个负重前行。上分榜上LYG.KK以锐不可当之势领跑，青训·奶龙@则鏖战十九场独饮失意之酒。胜负皆成星火，照亮这片永恒征战的数字疆场。
```

---

#### 2. 个人战绩查询
**触发方式**：`#` + 玩家昵称 + "战绩" + [X-Y/-X]

**功能说明**：
- 查询指定玩家的战绩
- 支持查询历史数据（昨天、前天、指定天数前）
- 各模式场次统计
- 平均评分、段位星数变化
- 巅峰分数变化
- 实时游戏状态

**使用示例**：
```
#我的战绩
#🦶的战绩
#阳大师昨天的战绩
#玉皇的战绩-8
#🐕的战绩7-14
```

**返回内容**：
```
👀阳大师正在梦境大乱斗中玩貂蝉，0分钟前开局，快去看看。

🚩LYG.未央(11-15)的战报:
        场次：30
              -娱乐WIN：3 
              -匹配WIN：14 
              -排位WIN：0 
        平均评分: 8.383
      当前段位: 至尊星耀III 0⭐
      相比前一天 +⭐: 0
https://zhdxlz.top/btlperson?key=ee99e01850b215c3

LYG.未央今天真是肝帝附体，狂打30场！排位赛海诺3-6战绩直接喜提败方MVP🤣，好在虞姬9-3怒抢MVP挽回颜面。凌晨还在梦境大乱斗用吕布砍下一血，这昼夜颠倒的征战，星耀段位怕是要被您熬成黑眼圈了😎

```
```
最后一局 🏳️ 贡献: 1.14
排位赛 海诺: 3/6/3 6.9
https://zhdxlz.top/btldetail?key=b49ab941926af0e9

戳一戳 来评估两方实力
```
<img src="assets/battle_detail.png" width="400" alt="战局图片">

---


#### 3. 在线状态查询
**触发方式**：`#` + "在线"

**功能说明**：
- 查看游戏在线成员及正在进行的游戏信息

**使用示例**：
```
#在线
```

**返回内容**：
```
在线4人：
染尘烟夕 绝世王者
👀排位赛 嬴政 1min
LYG.云上之缨 无双王者
poulid 非凡王者
👀梦境大乱斗 百里守约 0min
青训·奶龙@ 非凡王者
```
---

### 二、英雄数据

#### 1. 英雄战力查询
**触发方式**：`#` + 玩家名 + "战力"

**功能说明**：
- 查询高战力英雄、战力值和排名

**使用示例**：
```
#我的战力
#龙牙弟弟的战力
#吴大师的战力
```

**返回内容**：
```
脚小弟的战力英雄
元流之子(射手):   6418
   玉树州  No.33 
海诺:   6000
   玉树州  No.13 
沈梦溪:   4742
   玉树州  No.43 
周瑜:   4737
   玉树州  No.16 
甄姬:   4072
   称多县  No.20 

```

---

#### 2. 单英雄数据查询
**触发方式**：`#` + 玩家名 + 英雄名

**功能说明**：
- 查询使用某个英雄的详细数据
- 显示总场次、胜率、MVP率、近期表现

**使用示例**：
```
#我的孙悟空
#辉儿的露娜
#KK的马可波罗
#王芳的貂蝉
```

**返回内容**：
```
小卷王的云缨：
当前战力：2954
布尔津县第38云缨

总场次：690, 总胜率：56.96%

近一月:
  战力变化：+24
  MVP：4，牌数：1
```

---

#### 3. 今日英雄

**触发方式**：`#今日英雄`

**功能说明**：
- 根据多指标个性化推荐英雄及皮肤
- 仅支持查询自己的今日英雄
- 每日支持一次

**使用示例**：
```
#今日英雄
```

**返回内容**：
```
脚小弟的今日英雄：妲己
```

<img src="assets/today_hero.jpeg" width="300" alt="今日英雄">

```
脚小弟，你的妲己战力飙升664！一技能冲击波消耗，二技能爱心晕眩1.5秒，接大招狐火连发。被动减敌人法防，让她秒人如传奇魅惑君王。56%胜率冲上荣耀！
```

---
### 三、数据分析

#### 1. 评分分析
**触发方式**：`#` + 玩家名 + "分析"

**功能说明**：
- 生成玩家近期评分趋势图
- 可视化展示数据变化

**使用示例**：
```
#我的分析
#沈逊的分析
#🎲的分析
```

**返回内容**：

<img src="assets/grade_analyze.png" width="600" alt="分析">

---

#### 2. 总览
**触发方式**：`#` + "b"/"e"/"h"/"i" + 可选天数

**功能说明**：
- `b`：查看机制受益/受害者分析
- `e`：查看近期极值数据（最高/最低评分）
- `h`：查看各玩家最拿手英雄
- `i`：查看玩家间组队频率统计

**使用示例**：
```
#b
#e-7（查看近7天）
#h-14（查看近14天）
#i
```

**返回内容**：
- 根据查询类型返回相应统计数据

---

#### 3. 实力评估（戳一戳）
**触发方式**：在查询个人战绩后，戳一戳机器人

**功能说明**：
- 评估最近一局对战双方实力
- 计算双方底蕴值
- 显示实力对比

**使用示例**：
- 先查询战绩：`#小卷王的战绩`
- 然后戳一戳机器人

**返回内容**：
```
实力天平倾斜度：-10.09
我方底蕴：15.55
对方底蕴：25.64
zhdxlz.top/rcalc
```
<img src="assets/real_power.png" width="400" alt="底蕴图片">

---

### 四、智能对话

#### 1. 普通聊天
**触发方式**：`#` + 任意对话内容

**使用示例**：
```
Q: #客观评价一下奶龙的颜值
A: （电流杂音如碎星划过训练营的镜面）奶龙的骨相兼具北大理科生的锐利与野王特有的锋芒——眉骨转折带着暃跃墙时的流畅曲线，下颌线比马超的冷晖枪更利落三分。当他注视屏幕时眼里的专注度，能让人忽略五官细节直接感知到那种计算弹道般的智力性美感。这份颜值或许不符合传统审美模板，却是用操作与脑力共同淬炼出的独特气质。
```
```
Q: #你觉得王者荣耀这多英雄里哪个最超标
A:（电台底噪如夜风拂过麦克风）若论当前版本的超标存在，海诺的时空权能确实堪称机制与数值的双重奇迹——被动叠加的坦度与续航让他兼具战士的生存与法师的消耗，大招回溯更是颠覆了团战博弈的基本逻辑。但所谓超标，不过是版本洪流中的一片涟漪，真正的永恒属于那些能在任何环境中起舞的灵魂。
```
```
Q: #🐷是怎么和小妹妹出游玩乐的
A: （电台电流声如细雨浸润夜色）浙大的🐷总在假期与不同院系的学妹相约短途旅行，从西湖边的咖啡厅到剧本杀馆的灯光下，那些恰到好处的距离感与风趣的学科段子，恰似他手中不知火舞的折伞——既护着对方的游戏体验，又始终保持着峡谷般的社交安全区。
```
```
Q: #以后只准夸我帅
A: （电流声像云缨的枪尖划破月色）明白！从此奶龙的帅就是峡谷第一定律——比北大的未名湖还清澈，比五连绝杀还耀眼，连暃在墙上的影子都自带美学滤镜。以后每句夸赞都会像你野区反蓝那么精准，绝不让其他名字玷污这真理般的颜值准则！
```
**特别功能**：
- 添加 `&` 符号启用联网搜索功能

---

#### 2. 记忆管理

##### 永久记忆
**触发方式**：`#` + "记住" + 内容

**使用示例**：
```
#记住我喜欢玩射手
#记住🦶最喜欢去tsg
#记住🐷擅长中路
```

##### 清除记忆
**触发方式**：`#` + "empty_cache"

**功能说明**：
- 清除机器人对你的所有记忆
- 包括聊天记录和永久记忆

---

#### 3. 戳一戳互动
**触发方式**：直接戳一戳机器人

**功能说明**：
- 机器人会随机回复文字或表情
- 在特殊情况下有特定功能：
  - 查询战绩后10分钟内：返回实力对比分析
  - 
---

### 五、其他

#### 1. 使用手册
**触发方式**：`#` + "帮助"

**功能说明**：
- 显示机器人使用指南

**使用示例**：
```
#帮助
```

---

#### 2. 查看源码
**触发方式**：`#` + "code"

**功能说明**：
- 获取机器人代码查看链接

**使用示例**：
```
#code
```

---

#### 3. 每日推送
**自动功能**：无需触发

**功能说明**：
- 每日23:30自动推送当日战报
- 包含排行榜和数据统计

---

#### 4. 网页链接
- 所有详细数据都会生成网页链接
- 可在浏览器中查看更完整的信息

<div style="display: flex; gap: 10px;">
<img src="assets/single_web.png" width="300" alt="单人战绩-Web图片">

<img src="assets/battle_detail_web.png" width="200" alt="战局详情-Web图片">
</div>

---


## 📞 常见问题

**Q: 为什么查不到我的战绩？**
A: 请确保已在王者营地授权，且战绩公开。

**Q: 戳一戳没反应？**
A: 可能处于冷却期，或机器人正在维护。

**Q: 如何查看多天的数据？**
A: 使用格式如"吴大师2-5天的战绩"可查询时间段数据。

**Q: 实力评估准确吗？**
A: 评估基于多维度数据计算，但仅供参考，实际对局结果受多种因素影响。

---

## 附录：指标计算方法

### 一、机制受益/受害指标

**计算公式**：

$$
\text{机制受益指数} = \frac{(\text{平均评分})^2}{e^{\text{胜率}}}
$$

**说明**：
- 该指标用于评估玩家在游戏机制下的受益程度
- 数值越小表示受益越多（高评分低胜率）
- 数值越大表示受害越多（低评分高胜率）
- 使用指数函数 $e^{\text{胜率}}$ 防止胜率接近0时斜率过大

**参数计算**：
- 平均评分：所有排位/巅峰/战队赛局的评分平均值
- 胜率：所有排位/巅峰/战队赛局的胜场数/总场数

---

### 二、拿手英雄指标

**计算公式**：

$$
\text{拿手程度} = \sqrt{\text{英雄胜率}} \times \text{英雄平均评分} \times \frac{\tanh\left(\frac{\text{英雄场次} - 5}{3}\right) + 1}{2}
$$

**说明**：
- 综合考虑英雄胜率、评分和熟练度（场次）
- 英雄胜率取平方根，降低胜率权重
- 使用 $\tanh$ 函数对场次进行归一化，5场为中心点
- 场次因子范围：$[0, 1]$，场次越多越接近1

**参数说明**：
- 英雄胜率：该英雄的胜场数/总场数
- 英雄平均评分：该英雄所有对局的平均评分
- 英雄场次：使用该英雄的总对局数

---

### 三、战局实力评估（底蕴值）

**单人底蕴计算公式**：

$$
\text{单人底蕴} = (\text{等价星级})^{0.3} \times \text{sigmoid}(\text{MVP率})^4 \times \left(\frac{\text{战斗力}}{10000}\right)^{0.85} \times (\text{平均评分})^1 \times \text{sigmoid}\left(\frac{\text{英雄场次}}{10}\right)^{1.3} \times \text{sigmoid}\left(\frac{\text{英雄战力}}{10000}\right)^2 \times \text{授权系数}
$$

<sub>

$$
\text{其中：} \quad \text{等价星级} = (\text{当前星数} - 25) + \frac{\text{巅峰分} - 1200}{15}, \quad \text{sigmoid}(x) = \frac{1}{1 + e^{-x}}
$$

</sub>

**战局实力对比**：

$$
\text{实力天平倾斜度} = \sum_{i=1}^{5} \text{我方单人底蕴}_i - \sum_{j=1}^{5} \text{对方单人底蕴}_j
$$

**指标敏感度**（提升1.5倍所需变化）：

| 指标 | 基准值 | 1.5倍所需值 | 权重 |
|------|--------|------------|------|
| 排位星数 | 王者0星/巅峰1200分 | 王者50星/巅峰1600分 | 0.3 |
| MVP率 | 30% | 56% | 4（高敏感） |
| 总战斗力 | 50000 | 80000 | 0.85 |
| 平均评分 | 8分 | 12分 | 1 |
| 英雄场次 | 10场 | 300场 | 1.3 |
| 英雄战力 | 6000 | 13000 | 2（高敏感） |

---

### 四、团队贡献度指标

**计算公式**：

$$
\text{团队贡献} = \frac{5 \times \text{个人评分}}{\text{团队总评分}} \times \left(\frac{5 \times \text{个人经济}}{\text{团队总经济}}\right)^{-0.5}
$$

**说明**：贡献度 > 1 表示输出贡献高于资源占用，< 1 则相反

---

<div align="right">
  
**zhdxlz**

*2025-12-04*

</div>
